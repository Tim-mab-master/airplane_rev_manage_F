{"remainingRequest":"/Users/wanchengting/Desktop/數位商務應用/airplane_rev_manage_F/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wanchengting/Desktop/數位商務應用/airplane_rev_manage_F/frontend/src/pages/RevenueAnalysis.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wanchengting/Desktop/數位商務應用/airplane_rev_manage_F/frontend/src/pages/RevenueAnalysis.vue","mtime":1703820358900},{"path":"/Users/wanchengting/Desktop/數位商務應用/airplane_rev_manage_F/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1703513905140},{"path":"/Users/wanchengting/Desktop/數位商務應用/airplane_rev_manage_F/frontend/node_modules/babel-loader/lib/index.js","mtime":1703513905197},{"path":"/Users/wanchengting/Desktop/數位商務應用/airplane_rev_manage_F/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1703513905140},{"path":"/Users/wanchengting/Desktop/數位商務應用/airplane_rev_manage_F/frontend/node_modules/vue-loader/lib/index.js","mtime":1703513905274}],"contextDependencies":[],"result":["\nimport { StatsCard, ChartCard } from \"@/components/index\";\nimport { Dropdown, DropdownMenu, DropdownItem, DatePicker, Button } from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\n// import Chartist from \"chartist\";\nimport { PaperTable } from \"@/components\";\nimport axios from 'axios';\nconst past_rev =[];\nconst survival_rate =[];\n\nexport default {\n  components: {\n    StatsCard,\n    ChartCard,\n    PaperTable,\n    Dropdown,\n    DropdownMenu,\n    DropdownItem,\n    DatePicker,\n    Button,\n  },\n  /**\n   * Chart data used to render stats, charts. Should be replaced with server data\n   */\n  data() {\n    return {\n      postData: {\n        time: '',\n      },\n\n      region_rank: {\n        r1:\"\",\n        r2:\"\",\n        r3:\"\",\n        r4:\"\",\n        r5:\"\",\n\n      },\n      //下拉式選單相關\n      id: null,\n      duration: \"\",\n      season_labels: [\n            \"2023 Q1\",\n            \"2023 Q2\",\n            \"2023 Q3\",\n            \"2023 Q4\",\n      ],\n      month_labels: [\n            \"1\",\n            \"2\",\n            \"3\",\n            \"4\",\n            \"5\",\n            \"6\",\n            \"7\",\n            \"8\",\n            \"9\",\n            \"10\",\n            \"11\",\n            \"12\",\n      ],\n      \n      \n     \n      pastRevChart: {\n        data: {\n          labels: [\n            \"2023 Q1\",\n            \"2023 Q2\",\n            \"2023 Q3\",\n            \"2023 Q4\",\n          ],\n          series: [\n            [...past_rev],\n            // [230, 293, 380, 480, 503, 553, 600, 664, 698, 710, 736, 795],\n          ],\n        },\n        options: {\n          seriesBarDistance: 10,\n          axisX: {\n            showGrid: false,\n          },\n          height: \"245px\",\n        },\n      },\n      salesRateChart: {\n        data: {\n          labels: [\n          \"2023 Q1\",\n            \"2023 Q2\",\n            \"2023 Q3\",\n            \"2023 Q4\",\n          ],\n          series: [\n            [...survival_rate],\n            // [230, 293, 380, 480, 503, 553, 600, 664, 698, 710, 736, 795],\n          ],\n        },\n        options: {\n          seriesBarDistance: 10,\n          axisX: {\n            showGrid: false,\n          },\n          height: \"245px\",\n        },\n      },\n      classRankChart: {\n        data: {\n          labels: [\"56%\", \"29%\", \"6%\", \"6%\", \"3%\"],\n          series: [56, 29, 6, 6, 3],\n        },\n        options: {},\n      },\n      regionRankChart: {\n        data: {\n          labels: [\"56%\", \"29%\", \"6%\", \"6%\", \"3%\"],\n          series: [56, 29, 6, 6, 3],\n        },\n        options: {},\n      },\n      \n    };\n  },\n  methods: {\n    handleCommand(command) {\n            console.log(\"sjlfjasljflasjlfjawlef\");\n            this.id = String(command);\n        },\n    handleCommand2(command) {\n            console.log(\"時間尺度\");\n            if(String(command) == \"s\"){\n              this.duration = \"季\";\n            }else{\n              this.duration = \"月\";\n            }\n            \n        },\n    submit(duration){\n      console.log(\"Clicked Submit with duration:\", duration);\n\n      // this.getPastRev(duration);\n      // this.getSalesRate(duration);\n      \n    },\n\n    // 取得過去收益\n    getPastRev(duration){\n      this.postData.time = duration;\n      const past_rev = [];\n        // 感覺是後端出問題\n        axios.post('http://34.80.114.185:5000/past_revenue',this.postData)\n        .then(res => {\n          // handle the response data\n\n          //時間維度所帶來的 x 長度 （季 = 4; 月 = 12）\n          let time_len = res.data.past_rev.length;\n\n          if(time_len == 4){\n            this.pastRevChart.data.labels = this.season_labels;\n          }else{\n            this.pastRevChart.data.labels = this.month_labels;\n          }\n\n          for(let i = 0; i < time_len; i++) {\n            past_rev.push(Number(res.data.past_rev[i])|| 0);\n            \n          }\n          this.pastRevChart.data.series = [[...past_rev]];\n          console.log(this.tableData);\n         \n          console.log(res.data);\n          console.log(past_rev);\n        })\n        .catch(error => {\n          // handle errors\n          console.error('Error fetching data:', error);\n        });\n    },\n\n    // 取得售票率\n    getSalesRate(duration){\n      this.postData.time = duration;\n      const sales_rate = [];\n        // 感覺是後端出問題\n        axios.post('http://34.80.114.185:5000/get_sales_rate',this.postData)\n        .then(res => {\n          // handle the response data\n\n          //時間維度所帶來的 x 長度 （季 = 4; 月 = 12）\n          let time_len = res.data.past_rev.length;\n\n          if(time_len == 4){\n            this.salesRateChart.data.labels = this.season_labels;\n          }else{\n            this.salesRateChart.data.labels = this.month_labels;\n          }\n\n          for(let i = 0; i < time_len; i++) {\n            sales_rate.push(Number(res.data.sales_rate_list[i])|| 0);\n            \n          }\n          this.salesRateChart.data.series = [[...sales_rate]];\n          console.log(this.tableData);\n         \n          console.log(res.data);\n          console.log(sales_rate);\n        })\n        .catch(error => {\n          // handle errors\n          console.error('Error fetching data:', error);\n        });\n    },\n\n    //\n  },\n  mounted(){\n    // this.getPastRev(\"季\");\n    // this.getSalesRate(\"季\");\n\n    // this.fetchData();\n  },\n};\n",{"version":3,"sources":["RevenueAnalysis.vue"],"names":[],"mappings":";AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"RevenueAnalysis.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n\n    \n       <!-- 下拉式选单 -->\n        <dropdown @command=\"handleCommand\">\n      <span class=\"el-dropdown-link\">\n        選擇航班編號<i class=\"el-icon-arrow-down el-icon--right\"></i>\n      </span>\n        <dropdown-menu slot=\"dropdown\"  >\n            <dropdown-item command=\"MM620\">MM620</dropdown-item>   \n            </dropdown-menu>\n        </dropdown>\n        <input class=\"input\" placeholder=\"航班編號\" type=\"text\" v-model=\"id\" readonly>\n\n        <dropdown @command=\"handleCommand2\">\n      <span class=\"el-dropdown-link\">\n        選擇時間維度<i class=\"el-icon-arrow-down el-icon--right\"></i>\n      </span>\n        <dropdown-menu slot=\"dropdown\"  >\n            <dropdown-item command=\"s\">季</dropdown-item>   \n            <dropdown-item command=\"m\">月</dropdown-item>\n            </dropdown-menu>\n        </dropdown>\n        <input class=\"input\" placeholder=\"時間維度\" type=\"text\" v-model=\"duration\" readonly>\n\n       \n        <button @click=\"submit(duration)\"  class=\"search_button\">查詢</button>\n     \n\n    <!--Charts-->\n    <div class=\"row\">\n      <!-- 分成左右兩半 -->\n\n        <div class=\"col-6\">\n        <chart-card\n          title=\"過去收益\"\n          :chart-data=\"pastRevChart.data\"\n          :chart-options=\"pastRevChart.options\"\n        >\n          <!-- <span slot=\"footer\">\n            <i class=\"ti-check\"></i> Data information certified\n          </span> -->\n          <div slot=\"legend\">\n            <i class=\"fa fa-circle text-info\"></i> 過去收益\n          </div>\n        </chart-card>\n        </div>\n        <div class=\"col-6\">\n        <chart-card\n          title=\"售票率\"\n          :chart-data=\"salesRateChart.data\"\n          :chart-options=\"salesRateChart.options\"\n        >\n          <!-- <span slot=\"footer\">\n            <i class=\"ti-check\"></i> Data information certified\n          </span> -->\n          <div slot=\"legend\">\n            <i class=\"fa fa-circle text-info\"></i> 售票率\n          </div>\n        </chart-card>\n        </div>\n    </div>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <chart-card\n          title=\"艙位收益分析\"\n          :chart-data=\"classRankChart.data\"\n          chart-type=\"Pie\"\n          >\n          \n          <div slot=\"legend\">\n            <!-- 可以有五種顏色 -->\n            <i class=\"fa fa-circle text-info\"></i> A\n            <i class=\"fa fa-circle text-danger\"></i> B\n            <i class=\"fa fa-circle text-warning\"></i> C\n            <i class=\"fa fa-circle text-primary\"></i> D\n            <i class=\"fa fa-circle text-success\"></i> E\n          </div>\n          </chart-card>\n        </div>\n        <div class=\"col-6\">\n          <chart-card\n          title=\"地區收益貢獻度分析\"\n          :chart-data=\"regionRankChart.data\"\n          chart-type=\"Pie\"\n          >\n        \n          <div slot=\"legend\">\n            <i class=\"fa fa-circle text-info\"></i> {{ region_rank.r1 }}\n            <i class=\"fa fa-circle text-danger\"></i> {{ region_rank.r2 }}\n            <i class=\"fa fa-circle text-warning\"></i> {{ region_rank.r3 }}\n            <i class=\"fa fa-circle text-primary\"></i> {{ region_rank.r4 }}\n            <i class=\"fa fa-circle text-success\"></i> {{ region_rank.r5 }}\n            <i class=\"fa fa-circle text-muted\"></i> 其他\n          </div>\n          </chart-card>\n        </div>\n      </div>\n      \n\n     \n\n      \n    \n  </div>\n</template>\n<script>\nimport { StatsCard, ChartCard } from \"@/components/index\";\nimport { Dropdown, DropdownMenu, DropdownItem, DatePicker, Button } from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\n// import Chartist from \"chartist\";\nimport { PaperTable } from \"@/components\";\nimport axios from 'axios';\nconst past_rev =[];\nconst survival_rate =[];\n\nexport default {\n  components: {\n    StatsCard,\n    ChartCard,\n    PaperTable,\n    Dropdown,\n    DropdownMenu,\n    DropdownItem,\n    DatePicker,\n    Button,\n  },\n  /**\n   * Chart data used to render stats, charts. Should be replaced with server data\n   */\n  data() {\n    return {\n      postData: {\n        time: '',\n      },\n\n      region_rank: {\n        r1:\"\",\n        r2:\"\",\n        r3:\"\",\n        r4:\"\",\n        r5:\"\",\n\n      },\n      //下拉式選單相關\n      id: null,\n      duration: \"\",\n      season_labels: [\n            \"2023 Q1\",\n            \"2023 Q2\",\n            \"2023 Q3\",\n            \"2023 Q4\",\n      ],\n      month_labels: [\n            \"1\",\n            \"2\",\n            \"3\",\n            \"4\",\n            \"5\",\n            \"6\",\n            \"7\",\n            \"8\",\n            \"9\",\n            \"10\",\n            \"11\",\n            \"12\",\n      ],\n      \n      \n     \n      pastRevChart: {\n        data: {\n          labels: [\n            \"2023 Q1\",\n            \"2023 Q2\",\n            \"2023 Q3\",\n            \"2023 Q4\",\n          ],\n          series: [\n            [...past_rev],\n            // [230, 293, 380, 480, 503, 553, 600, 664, 698, 710, 736, 795],\n          ],\n        },\n        options: {\n          seriesBarDistance: 10,\n          axisX: {\n            showGrid: false,\n          },\n          height: \"245px\",\n        },\n      },\n      salesRateChart: {\n        data: {\n          labels: [\n          \"2023 Q1\",\n            \"2023 Q2\",\n            \"2023 Q3\",\n            \"2023 Q4\",\n          ],\n          series: [\n            [...survival_rate],\n            // [230, 293, 380, 480, 503, 553, 600, 664, 698, 710, 736, 795],\n          ],\n        },\n        options: {\n          seriesBarDistance: 10,\n          axisX: {\n            showGrid: false,\n          },\n          height: \"245px\",\n        },\n      },\n      classRankChart: {\n        data: {\n          labels: [\"56%\", \"29%\", \"6%\", \"6%\", \"3%\"],\n          series: [56, 29, 6, 6, 3],\n        },\n        options: {},\n      },\n      regionRankChart: {\n        data: {\n          labels: [\"56%\", \"29%\", \"6%\", \"6%\", \"3%\"],\n          series: [56, 29, 6, 6, 3],\n        },\n        options: {},\n      },\n      \n    };\n  },\n  methods: {\n    handleCommand(command) {\n            console.log(\"sjlfjasljflasjlfjawlef\");\n            this.id = String(command);\n        },\n    handleCommand2(command) {\n            console.log(\"時間尺度\");\n            if(String(command) == \"s\"){\n              this.duration = \"季\";\n            }else{\n              this.duration = \"月\";\n            }\n            \n        },\n    submit(duration){\n      console.log(\"Clicked Submit with duration:\", duration);\n\n      // this.getPastRev(duration);\n      // this.getSalesRate(duration);\n      \n    },\n\n    // 取得過去收益\n    getPastRev(duration){\n      this.postData.time = duration;\n      const past_rev = [];\n        // 感覺是後端出問題\n        axios.post('http://34.80.114.185:5000/past_revenue',this.postData)\n        .then(res => {\n          // handle the response data\n\n          //時間維度所帶來的 x 長度 （季 = 4; 月 = 12）\n          let time_len = res.data.past_rev.length;\n\n          if(time_len == 4){\n            this.pastRevChart.data.labels = this.season_labels;\n          }else{\n            this.pastRevChart.data.labels = this.month_labels;\n          }\n\n          for(let i = 0; i < time_len; i++) {\n            past_rev.push(Number(res.data.past_rev[i])|| 0);\n            \n          }\n          this.pastRevChart.data.series = [[...past_rev]];\n          console.log(this.tableData);\n         \n          console.log(res.data);\n          console.log(past_rev);\n        })\n        .catch(error => {\n          // handle errors\n          console.error('Error fetching data:', error);\n        });\n    },\n\n    // 取得售票率\n    getSalesRate(duration){\n      this.postData.time = duration;\n      const sales_rate = [];\n        // 感覺是後端出問題\n        axios.post('http://34.80.114.185:5000/get_sales_rate',this.postData)\n        .then(res => {\n          // handle the response data\n\n          //時間維度所帶來的 x 長度 （季 = 4; 月 = 12）\n          let time_len = res.data.past_rev.length;\n\n          if(time_len == 4){\n            this.salesRateChart.data.labels = this.season_labels;\n          }else{\n            this.salesRateChart.data.labels = this.month_labels;\n          }\n\n          for(let i = 0; i < time_len; i++) {\n            sales_rate.push(Number(res.data.sales_rate_list[i])|| 0);\n            \n          }\n          this.salesRateChart.data.series = [[...sales_rate]];\n          console.log(this.tableData);\n         \n          console.log(res.data);\n          console.log(sales_rate);\n        })\n        .catch(error => {\n          // handle errors\n          console.error('Error fetching data:', error);\n        });\n    },\n\n    //\n  },\n  mounted(){\n    // this.getPastRev(\"季\");\n    // this.getSalesRate(\"季\");\n\n    // this.fetchData();\n  },\n};\n</script>\n<style lang=\"scss\" >\n    .input {\n        border-radius: 4px;\n        border: 1px solid #DCDFE6;\n        padding: 8px 4px;\n        margin: 0px 8px 12px 4px;\n        text-align: center;\n    }\n    .search_button {\n        // padding: 0.3rem 18px;\n        border-radius: 4px;\n        border: 1px solid #DCDFE6;\n        margin: 0px 8px;\n        padding: 8px 16px;\n    }\n    .el-input__inner {\n      border: 1px solid #DCDFE6; \n      height: 40px; \n      background-color: #FFF;\n    }\n  </style>\n"]}]}