{"remainingRequest":"/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/node_modules/babel-loader/lib/index.js!/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/src/pages/RevenueAnalysis.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/src/pages/RevenueAnalysis.vue","mtime":1703795014129},{"path":"/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/.babelrc","mtime":1673336993000},{"path":"/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/node_modules/cache-loader/dist/cjs.js","mtime":1703513905140},{"path":"/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/node_modules/babel-loader/lib/index.js","mtime":1703513905197},{"path":"/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/node_modules/cache-loader/dist/cjs.js","mtime":1703513905140},{"path":"/Users/wanchengting/Downloads/vue-paper-dashboard-master 2/node_modules/vue-loader/lib/index.js","mtime":1703513905274}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport { StatsCard, ChartCard } from \"@/components/index\";\nimport { Dropdown, DropdownMenu, DropdownItem, DatePicker, Button } from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\n// import Chartist from \"chartist\";\nimport { PaperTable } from \"@/components\";\nimport axios from 'axios';\nvar past_rev = [];\nvar survival_rate = [];\nexport default {\n  components: {\n    StatsCard: StatsCard,\n    ChartCard: ChartCard,\n    PaperTable: PaperTable,\n    Dropdown: Dropdown,\n    DropdownMenu: DropdownMenu,\n    DropdownItem: DropdownItem,\n    DatePicker: DatePicker,\n    Button: Button\n  },\n  /**\n   * Chart data used to render stats, charts. Should be replaced with server data\n   */\n  data: function data() {\n    return {\n      postData: {\n        time: ''\n      },\n      //下拉式選單相關\n      id: null,\n      duration: \"\",\n      season_labels: [\"2023 Q1\", \"2023 Q2\", \"2023 Q3\", \"2023 Q4\"],\n      month_labels: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\n      pastRevChart: {\n        data: {\n          labels: [\"2023 Q1\", \"2023 Q2\", \"2023 Q3\", \"2023 Q4\"],\n          series: [[].concat(past_rev) // [230, 293, 380, 480, 503, 553, 600, 664, 698, 710, 736, 795],\n          ]\n        },\n        options: {\n          seriesBarDistance: 10,\n          axisX: {\n            showGrid: false\n          },\n          height: \"245px\"\n        }\n      },\n      salesRateChart: {\n        data: {\n          labels: [\"2023 Q1\", \"2023 Q2\", \"2023 Q3\", \"2023 Q4\"],\n          series: [[].concat(survival_rate) // [230, 293, 380, 480, 503, 553, 600, 664, 698, 710, 736, 795],\n          ]\n        },\n        options: {\n          seriesBarDistance: 10,\n          axisX: {\n            showGrid: false\n          },\n          height: \"245px\"\n        }\n      },\n      preferencesChart: {\n        data: {\n          labels: [\"56%\", \"29%\", \"6%\", \"6%\", \"3%\"],\n          series: [56, 29, 6, 6, 3]\n        },\n        options: {}\n      }\n    };\n  },\n  methods: {\n    handleCommand: function handleCommand(command) {\n      console.log(\"sjlfjasljflasjlfjawlef\");\n      this.id = String(command);\n    },\n    handleCommand2: function handleCommand2(command) {\n      console.log(\"時間尺度\");\n      if (String(command) == \"s\") {\n        this.duration = \"季\";\n      } else {\n        this.duration = \"月\";\n      }\n    },\n    submit: function submit(duration) {\n      console.log(\"Clicked Submit with duration:\", duration);\n      this.getPastRev(duration);\n    },\n    getPastRev: function getPastRev(duration) {\n      var _this = this;\n      this.postData.time = duration;\n      var past_rev = [];\n      // 感覺是後端出問題\n      axios.post('http://34.80.114.185:5000/past_revenue', this.postData).then(function (res) {\n        // handle the response data\n\n        //時間維度所帶來的 x 長度 （季 = 4; 月 = 12）\n        var time_len = res.data.past_rev.length;\n        if (time_len == 4) {\n          _this.pastRevChart.data.labels = _this.season_labels;\n        } else {\n          _this.pastRevChart.data.labels = _this.month_labels;\n        }\n        for (var i = 0; i < time_len; i++) {\n          past_rev.push(Number(res.data.past_rev[i]) || 0);\n        }\n        _this.pastRevChart.data.series = [[].concat(past_rev)];\n        console.log(_this.tableData);\n        console.log(res.data);\n        console.log(past_rev);\n      }).catch(function (error) {\n        // handle errors\n        console.error('Error fetching data:', error);\n      });\n    } //\n  },\n  mounted: function mounted() {\n    // this.getPastRev(\"月\");\n    // this.fetchData();\n  }\n};",{"version":3,"names":["StatsCard","ChartCard","Dropdown","DropdownMenu","DropdownItem","DatePicker","Button","PaperTable","axios","past_rev","survival_rate","components","data","postData","time","id","duration","season_labels","month_labels","pastRevChart","labels","series","concat","options","seriesBarDistance","axisX","showGrid","height","salesRateChart","preferencesChart","methods","handleCommand","command","console","log","String","handleCommand2","submit","getPastRev","_this","post","then","res","time_len","length","i","push","Number","tableData","catch","error","mounted"],"sources":["src/pages/RevenueAnalysis.vue"],"sourcesContent":["<template>\n  <div>\n\n    \n       <!-- 下拉式选单 -->\n        <dropdown @command=\"handleCommand\">\n      <span class=\"el-dropdown-link\">\n        選擇航班編號<i class=\"el-icon-arrow-down el-icon--right\"></i>\n      </span>\n        <dropdown-menu slot=\"dropdown\"  >\n            <dropdown-item command=\"MM620\">MM620</dropdown-item>   \n            </dropdown-menu>\n        </dropdown>\n        <input class=\"input\" placeholder=\"航班編號\" type=\"text\" v-model=\"id\" readonly>\n\n        <dropdown @command=\"handleCommand2\">\n      <span class=\"el-dropdown-link\">\n        選擇時間維度<i class=\"el-icon-arrow-down el-icon--right\"></i>\n      </span>\n        <dropdown-menu slot=\"dropdown\"  >\n            <dropdown-item command=\"s\">季</dropdown-item>   \n            <dropdown-item command=\"m\">月</dropdown-item>\n            </dropdown-menu>\n        </dropdown>\n        <input class=\"input\" placeholder=\"時間維度\" type=\"text\" v-model=\"duration\" readonly>\n\n       \n        <button @click=\"submit(duration)\"  class=\"search_button\">查詢</button>\n     \n\n    <!--Charts-->\n    <div class=\"row\">\n      <!-- 分成左右兩半 -->\n\n        <div class=\"col-6\">\n        <chart-card\n          title=\"過去收益\"\n          :chart-data=\"pastRevChart.data\"\n          :chart-options=\"pastRevChart.options\"\n        >\n          <!-- <span slot=\"footer\">\n            <i class=\"ti-check\"></i> Data information certified\n          </span> -->\n          <div slot=\"legend\">\n            <i class=\"fa fa-circle text-info\"></i> 過去收益\n          </div>\n        </chart-card>\n        </div>\n        <div class=\"col-6\">\n        <chart-card\n          title=\"售票率\"\n          :chart-data=\"salesRateChart.data\"\n          :chart-options=\"salesRateChart.options\"\n        >\n          <!-- <span slot=\"footer\">\n            <i class=\"ti-check\"></i> Data information certified\n          </span> -->\n          <div slot=\"legend\">\n            <i class=\"fa fa-circle text-info\"></i> 售票率\n          </div>\n        </chart-card>\n        </div>\n    </div>\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <chart-card\n          title=\"艙位收益分析\"\n          :chart-data=\"preferencesChart.data\"\n          chart-type=\"Pie\"\n          >\n          \n          <div slot=\"legend\">\n            <!-- 可以有五種顏色 -->\n            <i class=\"fa fa-circle text-info\"></i> A\n            <i class=\"fa fa-circle text-danger\"></i> B\n            <i class=\"fa fa-circle text-warning\"></i> C\n            <i class=\"fa fa-circle text-primary\"></i> D\n            <i class=\"fa fa-circle text-success\"></i> E\n          </div>\n          </chart-card>\n        </div>\n        <div class=\"col-6\">\n          <chart-card\n          title=\"地區收益貢獻度分析\"\n          :chart-data=\"preferencesChart.data\"\n          chart-type=\"Pie\"\n          >\n        \n          <div slot=\"legend\">\n            <i class=\"fa fa-circle text-info\"></i> A\n            <i class=\"fa fa-circle text-danger\"></i> B\n            <i class=\"fa fa-circle text-warning\"></i> C\n            <i class=\"fa fa-circle text-primary\"></i> D\n            <i class=\"fa fa-circle text-success\"></i> E\n            <i class=\"fa fa-circle text-muted\"></i> 其他\n          </div>\n          </chart-card>\n        </div>\n      </div>\n      \n\n     \n\n      \n    \n  </div>\n</template>\n<script>\nimport { StatsCard, ChartCard } from \"@/components/index\";\nimport { Dropdown, DropdownMenu, DropdownItem, DatePicker, Button } from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\n// import Chartist from \"chartist\";\nimport { PaperTable } from \"@/components\";\nimport axios from 'axios';\nconst past_rev =[];\nconst survival_rate =[];\n\nexport default {\n  components: {\n    StatsCard,\n    ChartCard,\n    PaperTable,\n    Dropdown,\n    DropdownMenu,\n    DropdownItem,\n    DatePicker,\n    Button,\n  },\n  /**\n   * Chart data used to render stats, charts. Should be replaced with server data\n   */\n  data() {\n    return {\n      postData: {\n        time: '',\n      },\n      //下拉式選單相關\n      id: null,\n      duration: \"\",\n      season_labels: [\n            \"2023 Q1\",\n            \"2023 Q2\",\n            \"2023 Q3\",\n            \"2023 Q4\",\n      ],\n      month_labels: [\n            \"1\",\n            \"2\",\n            \"3\",\n            \"4\",\n            \"5\",\n            \"6\",\n            \"7\",\n            \"8\",\n            \"9\",\n            \"10\",\n            \"11\",\n            \"12\",\n      ],\n      \n      \n     \n      pastRevChart: {\n        data: {\n          labels: [\n            \"2023 Q1\",\n            \"2023 Q2\",\n            \"2023 Q3\",\n            \"2023 Q4\",\n          ],\n          series: [\n            [...past_rev],\n            // [230, 293, 380, 480, 503, 553, 600, 664, 698, 710, 736, 795],\n          ],\n        },\n        options: {\n          seriesBarDistance: 10,\n          axisX: {\n            showGrid: false,\n          },\n          height: \"245px\",\n        },\n      },\n      salesRateChart: {\n        data: {\n          labels: [\n          \"2023 Q1\",\n            \"2023 Q2\",\n            \"2023 Q3\",\n            \"2023 Q4\",\n          ],\n          series: [\n            [...survival_rate],\n            // [230, 293, 380, 480, 503, 553, 600, 664, 698, 710, 736, 795],\n          ],\n        },\n        options: {\n          seriesBarDistance: 10,\n          axisX: {\n            showGrid: false,\n          },\n          height: \"245px\",\n        },\n      },\n      preferencesChart: {\n        data: {\n          labels: [\"56%\", \"29%\", \"6%\", \"6%\", \"3%\"],\n          series: [56, 29, 6, 6, 3],\n        },\n        options: {},\n      },\n      \n    };\n  },\n  methods: {\n    handleCommand(command) {\n            console.log(\"sjlfjasljflasjlfjawlef\");\n            this.id = String(command);\n        },\n    handleCommand2(command) {\n            console.log(\"時間尺度\");\n            if(String(command) == \"s\"){\n              this.duration = \"季\";\n            }else{\n              this.duration = \"月\";\n            }\n            \n        },\n    submit(duration){\n      console.log(\"Clicked Submit with duration:\", duration);\n\n      this.getPastRev(duration);\n      \n    },\n\n    getPastRev(duration){\n      this.postData.time = duration;\n      const past_rev = [];\n        // 感覺是後端出問題\n        axios.post('http://34.80.114.185:5000/past_revenue',this.postData)\n        .then(res => {\n          // handle the response data\n\n          //時間維度所帶來的 x 長度 （季 = 4; 月 = 12）\n          let time_len = res.data.past_rev.length;\n\n          if(time_len == 4){\n            this.pastRevChart.data.labels = this.season_labels;\n          }else{\n            this.pastRevChart.data.labels = this.month_labels;\n          }\n\n          for(let i = 0; i < time_len; i++) {\n            past_rev.push(Number(res.data.past_rev[i])|| 0);\n            \n          }\n          this.pastRevChart.data.series = [[...past_rev]];\n          console.log(this.tableData);\n         \n          console.log(res.data);\n          console.log(past_rev);\n        })\n        .catch(error => {\n          // handle errors\n          console.error('Error fetching data:', error);\n        });\n    }\n\n    //\n  },\n  mounted(){\n    // this.getPastRev(\"月\");\n    // this.fetchData();\n  },\n};\n</script>\n<style lang=\"scss\" >\n    .input {\n        border-radius: 4px;\n        border: 1px solid #DCDFE6;\n        padding: 8px 4px;\n        margin: 0px 8px 12px 4px;\n        text-align: center;\n    }\n    .search_button {\n        // padding: 0.3rem 18px;\n        border-radius: 4px;\n        border: 1px solid #DCDFE6;\n        margin: 0px 8px;\n        padding: 8px 16px;\n    }\n    .el-input__inner {\n      border: 1px solid #DCDFE6; \n      height: 40px; \n      background-color: #FFF;\n    }\n  </style>\n"],"mappings":";AA4GA,SAAAA,SAAA,EAAAC,SAAA;AACA,SAAAC,QAAA,EAAAC,YAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,MAAA;AACA;AACA;AACA,SAAAC,UAAA;AACA,OAAAC,KAAA;AACA,IAAAC,QAAA;AACA,IAAAC,aAAA;AAEA;EACAC,UAAA;IACAX,SAAA,EAAAA,SAAA;IACAC,SAAA,EAAAA,SAAA;IACAM,UAAA,EAAAA,UAAA;IACAL,QAAA,EAAAA,QAAA;IACAC,YAAA,EAAAA,YAAA;IACAC,YAAA,EAAAA,YAAA;IACAC,UAAA,EAAAA,UAAA;IACAC,MAAA,EAAAA;EACA;EACA;AACA;AACA;EACAM,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;QACAC,IAAA;MACA;MACA;MACAC,EAAA;MACAC,QAAA;MACAC,aAAA,GACA,WACA,WACA,WACA,UACA;MACAC,YAAA,GACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,KACA;MAIAC,YAAA;QACAP,IAAA;UACAQ,MAAA,GACA,WACA,WACA,WACA,UACA;UACAC,MAAA,MAAAC,MAAA,CACAb,QAAA,EACA;UAAA;QAEA;QACAc,OAAA;UACAC,iBAAA;UACAC,KAAA;YACAC,QAAA;UACA;UACAC,MAAA;QACA;MACA;MACAC,cAAA;QACAhB,IAAA;UACAQ,MAAA,GACA,WACA,WACA,WACA,UACA;UACAC,MAAA,MAAAC,MAAA,CACAZ,aAAA,EACA;UAAA;QAEA;QACAa,OAAA;UACAC,iBAAA;UACAC,KAAA;YACAC,QAAA;UACA;UACAC,MAAA;QACA;MACA;MACAE,gBAAA;QACAjB,IAAA;UACAQ,MAAA;UACAC,MAAA;QACA;QACAE,OAAA;MACA;IAEA;EACA;EACAO,OAAA;IACAC,aAAA,WAAAA,cAAAC,OAAA;MACAC,OAAA,CAAAC,GAAA;MACA,KAAAnB,EAAA,GAAAoB,MAAA,CAAAH,OAAA;IACA;IACAI,cAAA,WAAAA,eAAAJ,OAAA;MACAC,OAAA,CAAAC,GAAA;MACA,IAAAC,MAAA,CAAAH,OAAA;QACA,KAAAhB,QAAA;MACA;QACA,KAAAA,QAAA;MACA;IAEA;IACAqB,MAAA,WAAAA,OAAArB,QAAA;MACAiB,OAAA,CAAAC,GAAA,kCAAAlB,QAAA;MAEA,KAAAsB,UAAA,CAAAtB,QAAA;IAEA;IAEAsB,UAAA,WAAAA,WAAAtB,QAAA;MAAA,IAAAuB,KAAA;MACA,KAAA1B,QAAA,CAAAC,IAAA,GAAAE,QAAA;MACA,IAAAP,QAAA;MACA;MACAD,KAAA,CAAAgC,IAAA,gDAAA3B,QAAA,EACA4B,IAAA,WAAAC,GAAA;QACA;;QAEA;QACA,IAAAC,QAAA,GAAAD,GAAA,CAAA9B,IAAA,CAAAH,QAAA,CAAAmC,MAAA;QAEA,IAAAD,QAAA;UACAJ,KAAA,CAAApB,YAAA,CAAAP,IAAA,CAAAQ,MAAA,GAAAmB,KAAA,CAAAtB,aAAA;QACA;UACAsB,KAAA,CAAApB,YAAA,CAAAP,IAAA,CAAAQ,MAAA,GAAAmB,KAAA,CAAArB,YAAA;QACA;QAEA,SAAA2B,CAAA,MAAAA,CAAA,GAAAF,QAAA,EAAAE,CAAA;UACApC,QAAA,CAAAqC,IAAA,CAAAC,MAAA,CAAAL,GAAA,CAAA9B,IAAA,CAAAH,QAAA,CAAAoC,CAAA;QAEA;QACAN,KAAA,CAAApB,YAAA,CAAAP,IAAA,CAAAS,MAAA,OAAAC,MAAA,CAAAb,QAAA;QACAwB,OAAA,CAAAC,GAAA,CAAAK,KAAA,CAAAS,SAAA;QAEAf,OAAA,CAAAC,GAAA,CAAAQ,GAAA,CAAA9B,IAAA;QACAqB,OAAA,CAAAC,GAAA,CAAAzB,QAAA;MACA,GACAwC,KAAA,WAAAC,KAAA;QACA;QACAjB,OAAA,CAAAiB,KAAA,yBAAAA,KAAA;MACA;IACA,EAEA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA;IACA;EAAA;AAEA"}]}